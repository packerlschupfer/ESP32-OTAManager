; PlatformIO configuration for OTAManager with Ethernet
; Optimized for LAN8720 Ethernet PHY on ESP32

[env:esp32-ota-ethernet]
platform = espressif32
board = esp32dev
framework = arduino

; Library dependencies
lib_deps = 
    OTAManager
    ; Optional: EthernetManager if using
    ; EthernetManager

; Build flags for Ethernet support
build_flags = 
    -D CORE_DEBUG_LEVEL=3
    ; Ethernet PHY configuration for LAN8720
    -D ETH_CLK_MODE=ETH_CLOCK_GPIO0_IN
    -D ETH_PHY_TYPE=ETH_PHY_LAN8720
    -D ETH_PHY_ADDR=1
    -D ETH_PHY_MDC=23
    -D ETH_PHY_MDIO=18
    -D ETH_PHY_POWER=-1
    ; OTA configuration
    -D OTA_HOSTNAME=\"esp32-ethernet\"
    -D OTA_PASSWORD=\"eth-update\"
    -D OTA_PORT=3232
    ; Enable Ethernet debugging
    -D DEBUG_ETHERNET

; Serial monitor
monitor_speed = 115200
monitor_filters = 
    esp32_exception_decoder
    colorize
    time

; Initial upload via USB
upload_speed = 921600

; OTA upload configuration
; Can use either hostname or IP
upload_protocol = espota
upload_port = esp32-ethernet.local
; upload_port = 192.168.1.100  ; Alternative: use static IP
upload_flags = 
    --port=3232
    --auth=eth-update
    --timeout=30

; Advanced build options
board_build.partitions = min_spiffs.csv
board_build.f_cpu = 240000000L
board_build.flash_size = 4MB